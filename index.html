<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  <!-- YouTube IFrame Player API -->
  <script src="https://www.youtube.com/iframe_api?enablejsapi=1&key=AIzaSyD-lhhzP67JRJcvDwIO1z8bXlHdAbmOM44"></script>
</head>
<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs>
    <a-marker preset="hiro">
      <!-- Embed the YouTube video inside the a-entity -->
      <a-entity
        geometry="primitive: plane; height: 0.56; width: 1"
        material="shader: flat"
        position="0 0 0"
        rotation="-90 0 0"
        scale="2 2 2"
        id="player">
        <!-- Here we will put the YouTube iframe later -->
      </a-entity>
      <a-entity
        geometry="primitive: box; height: 0.2; width: 0.2; depth: 0.2"
        material="color: green"
        position="0 0.2 0"
        id="button"
      ></a-entity>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // YouTube Player
    var player;
    
    // This function creates an <iframe> (and YouTube player) after the API code downloads.
    function onYouTubeIframeAPIReady() {
      var urlParams = new URLSearchParams(window.location.search);
      var videoUrl = urlParams.get('videoId');
      if (!videoUrl) {
        console.error('No videoId parameter provided.');
        return;
      }

      var videoId = getVideoIdFromUrl(videoUrl);
      if (!videoId) {
        console.error('Invalid video URL provided.');
        return;
      }

      player = new YT.Player('player', {
        height: '360',
        width: '640',
        videoId: videoId,
        playerVars: {
          'controls': 0,
          'playsinline': 1
        }
      });

      // Event listener for the button click
      document.getElementById('button').addEventListener('click', function() {
        player.playVideo();
      });
    }

    // Function to get the YouTube video ID from the URL
    function getVideoIdFromUrl(url) {
      if (url.includes('youtube.com')) {
        var urlParams = new URL(url);
        return urlParams.searchParams.get('v');
      } else if (url.includes('youtu.be')) {
        var videoId = url.split('/').pop();
        return videoId;
      } else {
        return null;
      }
    }
  </script>
</body>
</html>
